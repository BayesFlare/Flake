From f83d2c2132f720efe4651f419750a79ffee763b5 Mon Sep 17 00:00:00 2001
From: Matthew Pitkin <matthew.pitkin@ligo.org>
Date: Tue, 24 Feb 2015 21:48:39 +0000
Subject: [PATCH] Added extra Command Line Options argument -f - this allows a
 custom configuration file to be input if required

---
 include/CommandLineOptions.h | 4 ++++
 src/CommandLineOptions.cpp   | 7 ++++++-
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/include/CommandLineOptions.h b/include/CommandLineOptions.h
index fc005e3..47866a9 100644
--- a/include/CommandLineOptions.h
+++ b/include/CommandLineOptions.h
@@ -39,6 +39,7 @@ class CommandLineOptions
 		std::string dataFile;
 		std::string compression;
 		int numThreads;
+		std::string configFile;
 
 	public:
 		CommandLineOptions(int argc, char** argv);
@@ -62,6 +63,9 @@ class CommandLineOptions
 		int get_numThreads() const
 		{ return numThreads; }
 
+		const std::string& get_configFile() const
+		{ return configFile; }
+
 		// Convert seed string to an integer and return it
 		unsigned long get_seed_long() const;
 
diff --git a/src/CommandLineOptions.cpp b/src/CommandLineOptions.cpp
index 57e47fd..d44a629 100644
--- a/src/CommandLineOptions.cpp
+++ b/src/CommandLineOptions.cpp
@@ -36,6 +36,7 @@ CommandLineOptions::CommandLineOptions(int argc, char** argv)
 ,dataFile("")
 ,compression("2.7182818284590451")
 ,numThreads(1)
+,configFile("")
 {
 	// The following code is based on the example given at
 	// http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt
@@ -44,7 +45,7 @@ CommandLineOptions::CommandLineOptions(int argc, char** argv)
 	stringstream s;
 
 	opterr = 0;
-	while((c = getopt(argc, argv, "hl:o:s:d:c:t:")) != -1)
+	while((c = getopt(argc, argv, "hl:o:s:d:c:t:f:")) != -1)
 	switch(c)
 	{
 		case 'h':
@@ -69,6 +70,9 @@ CommandLineOptions::CommandLineOptions(int argc, char** argv)
 			s<<optarg;
 			s>>numThreads;
 			break;
+		case 'f':
+			configFile = string(optarg);
+			break;
 		case '?':
 			cerr<<"# Option "<<optopt<<" requires an argument."<<endl;
 			if(isprint(optopt))
@@ -119,6 +123,7 @@ void CommandLineOptions::printHelp() const
 	cout<<"-d <filename>: Load data from the specified file, if required."<<endl;
 	cout<<"-c <value>: Specify a compression value (between levels) other than e."<<endl;
 	cout<<"-t <num_threads>: run on the specified number of threads. Default=1."<<endl;
+	cout<<"-f <filename>: a custom configuration file for adding problem specific options if required."<<endl;
 	exit(0);
 }
 
-- 
2.1.0

